{
  "change_id": "update-wysiwyg-search-experience",
  "generated_at": "2026-02-20T14:50:00Z",
  "features": {
    "R1": {
      "category": "functional",
      "description": "支持 Ctrl+F / Cmd+F 打开查找栏，并在有选区时用纯文本归一化结果填充查找词",
      "task_id": "1.1",
      "accept": "在编辑区无选区触发快捷键可打开查找栏；有选区触发时查找词自动填充归一化文本并立即建立命中索引。",
      "test": "SCOPE: GUI\n生成 GUI MCP runbook，覆盖 Ctrl+F 与 Cmd+F、无选区/有选区两类入口行为。",
      "steps": [
        "Run: SCOPE: GUI",
        "Run: 生成 GUI MCP runbook，覆盖 Ctrl+F 与 Cmd+F、无选区/有选区两类入口行为。"
      ],
      "passes": true
    },
    "R2": {
      "category": "functional",
      "description": "查找输入框按 Enter 执行“查找下一个”并支持循环回绕",
      "task_id": "1.2",
      "accept": "查找栏聚焦时连续按 Enter，命中序号按下一个推进并在尾部回绕到首个命中。",
      "test": "SCOPE: GUI\n验证连续 Enter 导航与命中计数显示一致。",
      "steps": [
        "Run: SCOPE: GUI",
        "Run: 验证连续 Enter 导航与命中计数显示一致。"
      ],
      "passes": true
    },
    "R3": {
      "category": "functional",
      "description": "支持 Esc 统一关闭查找栏并恢复编辑焦点",
      "task_id": "1.3",
      "accept": "查找输入框、替换输入框、编辑区焦点三种状态下按 Esc 均关闭查找栏，且编辑区可立即继续输入。",
      "test": "SCOPE: GUI\n验证 Esc 关闭后键入文本不丢失且光标行为正常。",
      "steps": [
        "Run: SCOPE: GUI",
        "Run: 验证 Esc 关闭后键入文本不丢失且光标行为正常。"
      ],
      "passes": true
    },
    "R4": {
      "category": "functional",
      "description": "新增“查找上一个”按钮并与“查找下一个”形成双向导航",
      "task_id": "2.1",
      "accept": "查找上一个/下一个均支持循环回绕，命中索引方向正确且不会跳过命中项。",
      "test": "SCOPE: GUI\n验证上/下按钮往返导航一致性。",
      "steps": [
        "Run: SCOPE: GUI",
        "Run: 验证上/下按钮往返导航一致性。"
      ],
      "passes": true
    },
    "R5": {
      "category": "functional",
      "description": "切换命中时采用最小滚动策略并实现双层高亮",
      "task_id": "2.2",
      "accept": "仅当当前命中不可见时触发滚动；全部命中淡高亮，当前命中强高亮，切换后高亮状态唯一且正确。",
      "test": "SCOPE: GUI\n使用长文档验证滚动触发条件与高亮状态切换。",
      "steps": [
        "Run: SCOPE: GUI",
        "Run: 使用长文档验证滚动触发条件与高亮状态切换。"
      ],
      "passes": true
    },
    "R6": {
      "category": "functional",
      "description": "无匹配时统一展示 0/N 并禁用不可执行操作",
      "task_id": "2.3",
      "accept": "无匹配时显示 `0/N`，查找上一个、查找下一个、替换当前、替换全部按钮均禁用。",
      "test": "SCOPE: GUI\n验证无匹配提示与禁用态一致性。",
      "steps": [
        "Run: SCOPE: GUI",
        "Run: 验证无匹配提示与禁用态一致性。"
      ],
      "passes": true
    },
    "R7": {
      "category": "functional",
      "description": "增加区分大小写、整词匹配、正则模式选项并实现联动规则",
      "task_id": "3.1",
      "accept": "支持区分大小写按钮（默认关闭，关闭时始终不区分大小写，开启后强制区分）；支持整词匹配仅对拉丁单词生效；正则模式开启时自动禁用整词匹配。",
      "test": "SCOPE: MIXED\nCLI: 增加匹配引擎测试（大小写按钮开关、整词拉丁边界、正则 `i/m`、正则与整词互斥）。\nGUI: 生成 MCP runbook，验证选项切换后的命中数量和命中位置。",
      "steps": [
        "Run: SCOPE: MIXED",
        "Run: CLI: 增加匹配引擎测试（大小写按钮开关、整词拉丁边界、正则 `i/m`、正则与整词互斥）。",
        "Run: GUI: 生成 MCP runbook，验证选项切换后的命中数量和命中位置。"
      ],
      "passes": true
    },
    "R8": {
      "category": "functional",
      "description": "支持正则查找/替换并处理非法表达式",
      "task_id": "3.2",
      "accept": "正则模式支持 JS RegExp（`i/m`，全局由查找流程控制）；非法表达式时给出明确错误提示且不破坏当前编辑状态。",
      "test": "SCOPE: MIXED\nCLI: 增加合法/非法正则用例，验证匹配与替换输出。\nGUI: 生成 MCP runbook，验证错误提示、恢复行为与后续正常查找。",
      "steps": [
        "Run: SCOPE: MIXED",
        "Run: CLI: 增加合法/非法正则用例，验证匹配与替换输出。",
        "Run: GUI: 生成 MCP runbook，验证错误提示、恢复行为与后续正常查找。"
      ],
      "passes": false
    },
    "R9": {
      "category": "functional",
      "description": "替换功能默认折叠，支持查找/替换模式切换且关闭后重置",
      "task_id": "4.1",
      "accept": "默认仅展示查找区；切换到替换模式后显示替换输入框与替换按钮；关闭查找栏后再次打开重置为默认查找模式。",
      "test": "SCOPE: GUI\n验证模式切换、替换动作、关闭重开重置行为。",
      "steps": [
        "Run: SCOPE: GUI",
        "Run: 验证模式切换、替换动作、关闭重开重置行为。"
      ],
      "passes": false
    },
    "R10": {
      "category": "functional",
      "description": "使用 iconfont MCP 替换关键按钮并对齐现有 UI 风格",
      "task_id": "4.2",
      "accept": "查找上一个、查找下一个、替换当前、替换全部、关闭、区分大小写、查找整个单词均使用统一图标；图标按钮具备可访问名称、禁用态、hover/active 一致反馈。",
      "test": "SCOPE: GUI\n验证图标渲染、交互态与可访问性名称。",
      "steps": [
        "Run: SCOPE: GUI",
        "Run: 验证图标渲染、交互态与可访问性名称。"
      ],
      "passes": false
    }
  }
}
